## 单元测试步骤

### 依赖配置
在项目的 `pom.xml` 文件中添加以下依赖以支持

surefire：单元测试报告
JaCoCo：单元测试代码覆盖率
```xml
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
<!--				<configuration>-->
<!--					<skip>true</skip>-->
<!--				</configuration>-->
    <configuration>
<!--					<skipTests>true</skipTests>-->
        <argLine>
            ${argLine} --add-opens java.base/java.lang=ALL-UNNAMED --add-opens java.base/java.math=ALL-UNNAMED
        </argLine>
        <systemPropertyVariables>
            <logback.configurationFile>classpath:logback-boot.xml</logback.configurationFile>
        </systemPropertyVariables>
    </configuration>
</plugin>
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-report-plugin</artifactId>
</plugin>
<plugin>
    <groupId>org.jacoco</groupId>
    <artifactId>jacoco-maven-plugin</artifactId>
    <version>0.8.12</version>
    <executions>
        <execution>
            <goals>
                <goal>prepare-agent</goal>
            </goals>
            <phase>test-compile</phase>
        </execution>
        <execution>
            <id>report</id>
            <phase>test</phase>
            <goals>
                <goal>report</goal>
            </goals>
        </execution>
    </executions>
</plugin>
```

### 执行测试
1. 使用以下命令运行单元测试：
   ```bash
   mvn clean test -Dencoding=UTF-8 -Pk8s-test > mvn_test_log.txt 2>&1
   ```

2. 根据单元测试结果生成单元测试报告的html
    ```bash
    mvn surefire-report:report-only
    ```
2. 生成测试覆盖率报告：
   ```bash
   mvn jacoco:report
   ```

### 查看测试报告
- 覆盖率测试报告生成在 `target/site/jacoco/index.html` 文件中。
- 单元测试报告生成在 `target/reports/index.html` 文件中。
- 使用浏览器打开该文件以查看详细的覆盖率信息。

### 注意事项
- 确保所有依赖已正确下载。
- 在运行测试前，清理项目以避免缓存问题：
  ```bash
  mvn clean
  ```
- 如果测试依赖外部服务，建议使用 Mock 框架（如 Mockito）进行隔离。
- 定期更新依赖版本以获得最新功能和修复。
- 验证 CI/CD 流程中是否正确集成了单元测试步骤。